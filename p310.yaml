name: psld310
channels:
  - pytorch
  - conda-forge
dependencies:
  - python=3.10
  - pip
  - ffmpeg
  - pillow=10.*
  - numpy=1.24.*          # stable with torch 2.2.x
  - ca-certificates
  - openssl
  - pip:
      # --- Core torch stack (MPS works out of the box on macOS) ---
      - torch==2.2.2
      - torchvision==0.17.2
      - torchaudio==2.2.2

      # --- Lightning stack updated for py>=3.10 & torch 2.x ---
      - pytorch-lightning==2.1.3
      - torchmetrics==1.3.1
      - lightning-utilities>=0.9.0

      # --- SD / PSLD ecosystem ---
      - omegaconf==2.3.0           # newer than 2.1.1 (py3.10 support)
      - einops==0.7.0
      - diffusers==0.27.2
      - transformers==4.40.2       # HF DINOv2 + stable APIs
      - accelerate>=0.27.0
      - safetensors
      - timm>=0.9.16
      - opencv-python
      - matplotlib
      - scikit-image
      - tqdm
      - datasets==3.1.0
      - invisible-watermark==0.2.0 # aka imwatermark
      - pandas==2.0.3
      - scipy==1.10.1              # compatible with numpy 1.24
